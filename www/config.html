<!DOCTYPE html>
<html>
    <head>
		<meta name="format-detection" content="telephone=no">
        <meta charset="utf-8">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
        <link rel="stylesheet" type="text/css" href="css/index.css">
		<link rel="stylesheet" type="text/css" href="mobileui/style.css">
        <title>HomeESP</title>
		
		
		<script type = "text/javascript">
			var ws = null;
			function inicial(){
			    var ip = localStorage.getItem("IP");
				document.getElementById("status").innerHTML = "Desconectado";
				ws = new WebSocket('ws://'+ip+'/test');
				ws.onopen = function() {
					ws.send("A0");
					document.getElementById("status").innerHTML = "Conectado";
				};
				ws.onmessage = function(evt){
				   var received_msg = evt.data;
				   var estadoalarme = received_msg.substring(6,7);
				   var timealarme = received_msg.substring(7,8);
				   if (estadoalarme == '1') {document.getElementById("alarme1").checked = true;}else {document.getElementById("alarme1").checked = false;}
				   document.getElementById("tempo").value = timealarme;
				};
			    document.getElementById("text1").value = localStorage.getItem("IP");
			}
			function volta(){window.location.href = "index.html";}
			function atualiza(){inicial();}
			function guardaIP(){localStorage.setItem("IP", document.getElementById("text1").value);}
			function guardaIDCLIENTE(){
				var ch = document.getElementById("IDCliente");
				ws.send("E"+ch.value);
			}
			
		</script>	
    </head>

    <body onload="inicial();">
		<div class="header blue-900">
		    <button class="left icon ion-android-arrow-back" onclick="volta();" name="button"></button>
			<h1 class="align-center" style="color:#9eb5d9">Configuração</h1>
		</div>
		 		
		<div class="header blue-900 sub shadow tab">
			<button class="icon ion-wifi active" onclick="openCity(event, 'tabRede')">Rede</button>
			<button class="icon ion-ios-cloud" onclick="openCity(event, 'tabCliente')">Monitoramento</button>
		</div>

		<div class="tab-content active" id="tabRede">
			</br></br></br></br></br></br></br></br>
			<div class="list">
				<div class="item">
					<h2>Endereço IP</h2>
					<div class="right">
						<input type="text" id="text1" onchange="guardaIP();">
					</div>
				</div>
			</div>
		</div>
		<div class="tab-content" id="tabCliente">
			</br></br></br></br></br></br></br></br>
			<div class="list">
				<div class="item">
					<h2>ID do cliente</h2>
					<div class="right">
						<input type="text" id="IDCliente" onchange="guardaIDCLIENTE();">
					</div>
				</div>
			</div>			
		</div>
		
		<div class="footer blue-900">
			<div class="title" style="color:#9eb5d9">
				<div id="status"></div>
			</div>
			<div class="right">
			    <button onclick="atualiza();" class="icon ion-refresh" style="color:#9eb5d9"></button>
			</div>
		</div>
	
		<script>
			function openCity(evt, cityName) {
				var i, tabcontent, tablinks;
				tabcontent = document.getElementsByClassName("tab-content");
				for (i = 0; i < tabcontent.length; i++) {
					tabcontent[i].style.display = "none";
				}
				tablinks = document.getElementsByClassName("icon");
				for (i = 0; i < tablinks.length; i++) {
					tablinks[i].className = tablinks[i].className.replace(" active", "");
				}
				document.getElementById(cityName).style.display = "block";
				evt.currentTarget.className += " active";
			}
		</script>

    </body>
</html>
